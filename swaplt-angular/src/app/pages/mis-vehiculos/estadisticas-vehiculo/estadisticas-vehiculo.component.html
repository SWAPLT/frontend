<div *ngIf="esPropietario(); else noAcceso">
  <div class="estadisticas-header">
    <label for="rangoDias">Rango de días:</label>
    <select id="rangoDias" [(ngModel)]="dias" (change)="cambiarDias(dias)">
      <option *ngFor="let d of diasOpciones" [value]="d">Últimos {{d}} días</option>
    </select>
  </div>

  <div *ngIf="loading" class="loading">
    <div class="spinner-grow text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>
  <div *ngIf="error && !loading" class="error">
    <p>{{ error }}</p>
    <button (click)="cargarEstadisticas()">Reintentar</button>
  </div>
  <div *ngIf="!loading && !error">
    <div style="display: block; width: 100%; max-width: 600px; margin: 0 auto;">
      <canvas baseChart
        [data]="lineChartData"
        [options]="lineChartOptions"
        [type]="lineChartType">
      </canvas>
    </div>
    <div class="estadisticas-resumen">
      <span><strong>Total de visitas:</strong> {{ totalVisitas }}</span>
      <span><strong>Promedio diario:</strong> {{ promedioDiario | number:'1.1-2' }}</span>
    </div>
  </div>
</div>
<ng-template #noAcceso>
  <div class="no-access">Solo el propietario puede ver las estadísticas de este vehículo.</div>
</ng-template>
