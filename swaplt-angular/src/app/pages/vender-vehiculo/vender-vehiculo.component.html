<div class="container">
  <h2>Vender Vehículo</h2>
  <form [formGroup]="vehiculoForm" (ngSubmit)="onSubmit()">
    <!-- Información básica -->
    <div class="form-section">
      <h3>Información Básica</h3>
      
      <div class="form-group">
        <label for="categoria">Categoría*</label>
        <select id="categoria" formControlName="categoria_id" class="form-control">
          <option value="">Selecciona una categoría</option>
          <option *ngFor="let categoria of categorias" [value]="categoria.id">
            {{categoria.nombre}}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label for="marca">Marca*</label>
        <input type="text" id="marca" formControlName="marca" class="form-control">
      </div>

      <div class="form-group">
        <label for="modelo">Modelo*</label>
        <input type="text" id="modelo" formControlName="modelo" class="form-control">
      </div>

      <div class="form-group">
        <label for="precio">Precio (€)*</label>
        <input type="number" id="precio" formControlName="precio" class="form-control">
      </div>

      <div class="form-group">
        <label for="anio">Año*</label>
        <input type="number" id="anio" formControlName="anio" class="form-control">
      </div>
    </div>

    <!-- Características técnicas -->
    <div class="form-section">
      <h3>Características Técnicas</h3>
      
      <div class="form-group">
        <label for="estado">Estado*</label>
        <select id="estado" formControlName="estado" class="form-control">
          <option value="">Selecciona el estado</option>
          <option value="nuevo">Nuevo</option>
          <option value="usado">Usado</option>
        </select>
      </div>

      <div class="form-group">
        <label for="transmision">Transmisión*</label>
        <select id="transmision" formControlName="transmision" class="form-control">
          <option value="">Selecciona la transmisión</option>
          <option value="manual">Manual</option>
          <option value="automatica">Automática</option>
        </select>
      </div>

      <div class="form-group">
        <label for="tipo_combustible">Tipo de Combustible*</label>
        <select id="tipo_combustible" formControlName="tipo_combustible" class="form-control">
          <option value="">Selecciona el combustible</option>
          <option value="gasolina">Gasolina</option>
          <option value="diesel">Diésel</option>
          <option value="electrico">Eléctrico</option>
          <option value="hibrido">Híbrido</option>
        </select>
      </div>

      <div class="form-group">
        <label for="kilometraje">Kilometraje*</label>
        <input type="number" id="kilometraje" formControlName="kilometraje" class="form-control">
      </div>

      <div class="form-group">
        <label for="fuerza">Potencia (CV)*</label>
        <input type="number" id="fuerza" formControlName="fuerza" class="form-control">
      </div>

      <div class="form-group">
        <label for="capacidad_motor">Capacidad del Motor (L)*</label>
        <input type="number" id="capacidad_motor" formControlName="capacidad_motor" class="form-control" step="0.1">
      </div>
    </div>

    <!-- Detalles adicionales -->
    <div class="form-section">
      <h3>Detalles Adicionales</h3>

      <div class="form-group">
        <label for="color">Color*</label>
        <input type="text" id="color" formControlName="color" class="form-control">
      </div>

      <div class="form-group">
        <label for="ubicacion">Ubicación*</label>
        <input type="text" id="ubicacion" formControlName="ubicacion" class="form-control">
      </div>

      <div class="form-group">
        <label for="matricula">Matrícula*</label>
        <input type="text" id="matricula" formControlName="matricula" class="form-control">
      </div>

      <div class="form-group">
        <label for="numero_serie">Número de Serie*</label>
        <input type="text" id="numero_serie" formControlName="numero_serie" class="form-control">
      </div>

      <div class="form-group">
        <label for="numero_puertas">Número de Puertas*</label>
        <input type="number" id="numero_puertas" formControlName="numero_puertas" class="form-control">
      </div>
    </div>

    <!-- Descripción y estado legal -->
    <div class="form-section">
      <h3>Descripción y Estado Legal</h3>

      <div class="form-group">
        <label for="descripcion">Descripción*</label>
        <textarea id="descripcion" formControlName="descripcion" class="form-control" rows="4"></textarea>
      </div>

      <div class="form-group checkbox-group">
        <div class="checkbox-container">
          <input type="checkbox" id="vehiculo_libre_accidentes" formControlName="vehiculo_libre_accidentes">
          <label for="vehiculo_libre_accidentes">Certifico que el vehículo está libre de accidentes*</label>
        </div>
      </div>

      <div class="form-group checkbox-group">
        <div class="checkbox-container">
          <input type="checkbox" id="vehiculo_robado" formControlName="vehiculo_robado">
          <label for="vehiculo_robado">Certifico que el vehículo no es robado*</label>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-primary" [disabled]="!vehiculoForm.valid || loading">
        {{ loading ? 'Publicando...' : 'Publicar Vehículo' }}
      </button>
      <button type="button" class="btn-secondary" routerLink="/" [disabled]="loading">Cancelar</button>
    </div>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <p class="required-fields">* Campos obligatorios</p>

    <!-- Mensajes de validación -->
    <div class="validation-messages">
      <div *ngIf="f['marca'].touched && f['marca'].errors?.['required']" class="validation-error">
        La marca es obligatoria
      </div>
      <div *ngIf="f['modelo'].touched && f['modelo'].errors?.['required']" class="validation-error">
        El modelo es obligatorio
      </div>
      <div *ngIf="f['matricula'].touched && f['matricula'].errors?.['pattern']" class="validation-error">
        La matrícula debe tener el formato: 1234ABC
      </div>
      <div *ngIf="f['descripcion'].touched && f['descripcion'].errors?.['minlength']" class="validation-error">
        La descripción debe tener al menos 50 caracteres
      </div>
      <div *ngIf="f['descripcion'].touched && f['descripcion'].errors?.['maxlength']" class="validation-error">
        La descripción no puede exceder los 255 caracteres
      </div>
    </div>
  </form>
</div>
